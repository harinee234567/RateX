// Comprehensive currency database
const CURRENCIES = {
  USD: { name: "United States Dollar", symbol: "$", flag: "ğŸ‡ºğŸ‡¸" },
  EUR: { name: "Euro", symbol: "â‚¬", flag: "ğŸ‡ªğŸ‡º" },
  GBP: { name: "British Pound Sterling", symbol: "Â£", flag: "ğŸ‡¬ğŸ‡§" },
  INR: { name: "Indian Rupee", symbol: "â‚¹", flag: "ğŸ‡®ğŸ‡³" },
  JPY: { name: "Japanese Yen", symbol: "Â¥", flag: "ğŸ‡¯ğŸ‡µ" },
  AUD: { name: "Australian Dollar", symbol: "A$", flag: "ğŸ‡¦ğŸ‡º" },
  CAD: { name: "Canadian Dollar", symbol: "C$", flag: "ğŸ‡¨ğŸ‡¦" },
  CHF: { name: "Swiss Franc", symbol: "CHF", flag: "ğŸ‡¨ğŸ‡­" },
  CNY: { name: "Chinese Yuan", symbol: "Â¥", flag: "ğŸ‡¨ğŸ‡³" },
  SEK: { name: "Swedish Krona", symbol: "kr", flag: "ğŸ‡¸ğŸ‡ª" },
  NZD: { name: "New Zealand Dollar", symbol: "NZ$", flag: "ğŸ‡³ğŸ‡¿" },
  MXN: { name: "Mexican Peso", symbol: "$", flag: "ğŸ‡²ğŸ‡½" },
  SGD: { name: "Singapore Dollar", symbol: "S$", flag: "ğŸ‡¸ğŸ‡¬" },
  HKD: { name: "Hong Kong Dollar", symbol: "HK$", flag: "ğŸ‡­ğŸ‡°" },
  NOK: { name: "Norwegian Krone", symbol: "kr", flag: "ğŸ‡³ğŸ‡´" },
  KRW: { name: "South Korean Won", symbol: "â‚©", flag: "ğŸ‡°ğŸ‡·" },
  TRY: { name: "Turkish Lira", symbol: "â‚º", flag: "ğŸ‡¹ğŸ‡·" },
  RUB: { name: "Russian Ruble", symbol: "â‚½", flag: "ğŸ‡·ğŸ‡º" },
  BRL: { name: "Brazilian Real", symbol: "R$", flag: "ğŸ‡§ğŸ‡·" },
  ZAR: { name: "South African Rand", symbol: "R", flag: "ğŸ‡¿ğŸ‡¦" },
  DKK: { name: "Danish Krone", symbol: "kr", flag: "ğŸ‡©ğŸ‡°" },
  PLN: { name: "Polish Zloty", symbol: "zÅ‚", flag: "ğŸ‡µğŸ‡±" },
  THB: { name: "Thai Baht", symbol: "à¸¿", flag: "ğŸ‡¹ğŸ‡­" },
  MYR: { name: "Malaysian Ringgit", symbol: "RM", flag: "ğŸ‡²ğŸ‡¾" },
  IDR: { name: "Indonesian Rupiah", symbol: "Rp", flag: "ğŸ‡®ğŸ‡©" },
  HUF: { name: "Hungarian Forint", symbol: "Ft", flag: "ğŸ‡­ğŸ‡º" },
  CZK: { name: "Czech Koruna", symbol: "KÄ", flag: "ğŸ‡¨ğŸ‡¿" },
  ILS: { name: "Israeli New Shekel", symbol: "â‚ª", flag: "ğŸ‡®ğŸ‡±" },
  CLP: { name: "Chilean Peso", symbol: "$", flag: "ğŸ‡¨ğŸ‡±" },
  PHP: { name: "Philippine Peso", symbol: "â‚±", flag: "ğŸ‡µğŸ‡­" },
  AED: { name: "UAE Dirham", symbol: "Ø¯.Ø¥", flag: "ğŸ‡¦ğŸ‡ª" },
  COP: { name: "Colombian Peso", symbol: "$", flag: "ğŸ‡¨ğŸ‡´" },
  SAR: { name: "Saudi Riyal", symbol: "ï·¼", flag: "ğŸ‡¸ğŸ‡¦" },
  RON: { name: "Romanian Leu", symbol: "lei", flag: "ğŸ‡·ğŸ‡´" },
  VND: { name: "Vietnamese Dong", symbol: "â‚«", flag: "ğŸ‡»ğŸ‡³" },
  ARS: { name: "Argentine Peso", symbol: "$", flag: "ğŸ‡¦ğŸ‡·" },
  IQD: { name: "Iraqi Dinar", symbol: "Ø¹.Ø¯", flag: "ğŸ‡®ğŸ‡¶" },
  TWD: { name: "New Taiwan Dollar", symbol: "NT$", flag: "ğŸ‡¹ğŸ‡¼" },
  QAR: { name: "Qatari Riyal", symbol: "ï·¼", flag: "ğŸ‡¶ğŸ‡¦" },
  PKR: { name: "Pakistani Rupee", symbol: "â‚¨", flag: "ğŸ‡µğŸ‡°" },
  KWD: { name: "Kuwaiti Dinar", symbol: "Ø¯.Ùƒ", flag: "ğŸ‡°ğŸ‡¼" },
  NGN: { name: "Nigerian Naira", symbol: "â‚¦", flag: "ğŸ‡³ğŸ‡¬" },
  EGP: { name: "Egyptian Pound", symbol: "Â£", flag: "ğŸ‡ªğŸ‡¬" },
  BDT: { name: "Bangladeshi Taka", symbol: "à§³", flag: "ğŸ‡§ğŸ‡©" },
  UAH: { name: "Ukrainian Hryvnia", symbol: "â‚´", flag: "ğŸ‡ºğŸ‡¦" },
  PEN: { name: "Peruvian Sol", symbol: "S/", flag: "ğŸ‡µğŸ‡ª" },
  KES: { name: "Kenyan Shilling", symbol: "KSh", flag: "ğŸ‡°ğŸ‡ª" },
  OMR: { name: "Omani Rial", symbol: "ï·¼", flag: "ğŸ‡´ğŸ‡²" },
  BGN: { name: "Bulgarian Lev", symbol: "Ğ»Ğ²", flag: "ğŸ‡§ğŸ‡¬" },
  VEF: { name: "Venezuelan BolÃ­var", symbol: "Bs", flag: "ğŸ‡»ğŸ‡ª" },
  MAD: { name: "Moroccan Dirham", symbol: "Ø¯.Ù….", flag: "ğŸ‡²ğŸ‡¦" },
  HRK: { name: "Croatian Kuna", symbol: "kn", flag: "ğŸ‡­ğŸ‡·" },
  LKR: { name: "Sri Lankan Rupee", symbol: "â‚¨", flag: "ğŸ‡±ğŸ‡°" },
  UYU: { name: "Uruguayan Peso", symbol: "$U", flag: "ğŸ‡ºğŸ‡¾" },
  GHS: { name: "Ghanaian Cedi", symbol: "â‚µ", flag: "ğŸ‡¬ğŸ‡­" },
  DZD: { name: "Algerian Dinar", symbol: "Ø¯.Ø¬", flag: "ğŸ‡©ğŸ‡¿" },
  JOD: { name: "Jordanian Dinar", symbol: "Ø¯.Ø§", flag: "ğŸ‡¯ğŸ‡´" },
  BHD: { name: "Bahraini Dinar", symbol: ".Ø¯.Ø¨", flag: "ğŸ‡§ğŸ‡­" },
  TND: { name: "Tunisian Dinar", symbol: "Ø¯.Øª", flag: "ğŸ‡¹ğŸ‡³" },
  ISK: { name: "Icelandic KrÃ³na", symbol: "kr", flag: "ğŸ‡®ğŸ‡¸" },
  GTQ: { name: "Guatemalan Quetzal", symbol: "Q", flag: "ğŸ‡¬ğŸ‡¹" },
  DOP: { name: "Dominican Peso", symbol: "RD$", flag: "ğŸ‡©ğŸ‡´" },
  CRC: { name: "Costa Rican ColÃ³n", symbol: "â‚¡", flag: "ğŸ‡¨ğŸ‡·" },
  ETB: { name: "Ethiopian Birr", symbol: "Br", flag: "ğŸ‡ªğŸ‡¹" },
  LBP: { name: "Lebanese Pound", symbol: "Â£", flag: "ğŸ‡±ğŸ‡§" },
  MMK: { name: "Myanmar Kyat", symbol: "K", flag: "ğŸ‡²ğŸ‡²" },
  AZN: { name: "Azerbaijani Manat", symbol: "â‚¼", flag: "ğŸ‡¦ğŸ‡¿" },
  UZS: { name: "Uzbekistani Som", symbol: "Ğ»Ğ²", flag: "ğŸ‡ºğŸ‡¿" },
  BOB: { name: "Bolivian Boliviano", symbol: "Bs.", flag: "ğŸ‡§ğŸ‡´" },
  AFN: { name: "Afghan Afghani", symbol: "Ø‹", flag: "ğŸ‡¦ğŸ‡«" },
  ALL: { name: "Albanian Lek", symbol: "L", flag: "ğŸ‡¦ğŸ‡±" },
  AMD: { name: "Armenian Dram", symbol: "Ö", flag: "ğŸ‡¦ğŸ‡²" },
  AOA: { name: "Angolan Kwanza", symbol: "Kz", flag: "ğŸ‡¦ğŸ‡´" },
  AWG: { name: "Aruban Florin", symbol: "Æ’", flag: "ğŸ‡¦ğŸ‡¼" },
  BAM: { name: "Bosnia-Herzegovina Convertible Mark", symbol: "KM", flag: "ğŸ‡§ğŸ‡¦" },
  BBD: { name: "Barbadian Dollar", symbol: "$", flag: "ğŸ‡§ğŸ‡§" },
  BND: { name: "Brunei Dollar", symbol: "$", flag: "ğŸ‡§ğŸ‡³" },
  BSD: { name: "Bahamian Dollar", symbol: "$", flag: "ğŸ‡§ğŸ‡¸" },
  BWP: { name: "Botswanan Pula", symbol: "P", flag: "ğŸ‡§ğŸ‡¼" },
  BYN: { name: "Belarusian Ruble", symbol: "Br", flag: "ğŸ‡§ğŸ‡¾" },
  BZD: { name: "Belize Dollar", symbol: "BZ$", flag: "ğŸ‡§ğŸ‡¿" },
  CDF: { name: "Congolese Franc", symbol: "FC", flag: "ğŸ‡¨ğŸ‡©" },
  CUP: { name: "Cuban Peso", symbol: "â‚±", flag: "ğŸ‡¨ğŸ‡º" },
  CVE: { name: "Cape Verdean Escudo", symbol: "$", flag: "ğŸ‡¨ğŸ‡»" },
  DJF: { name: "Djiboutian Franc", symbol: "Fdj", flag: "ğŸ‡©ğŸ‡¯" },
  ERN: { name: "Eritrean Nakfa", symbol: "Nfk", flag: "ğŸ‡ªğŸ‡·" },
  FJD: { name: "Fijian Dollar", symbol: "$", flag: "ğŸ‡«ğŸ‡¯" },
  GEL: { name: "Georgian Lari", symbol: "â‚¾", flag: "ğŸ‡¬ğŸ‡ª" },
  GIP: { name: "Gibraltar Pound", symbol: "Â£", flag: "ğŸ‡¬ğŸ‡®" },
  GMD: { name: "Gambian Dalasi", symbol: "D", flag: "ğŸ‡¬ğŸ‡²" },
  GNF: { name: "Guinean Franc", symbol: "FG", flag: "ğŸ‡¬ğŸ‡³" },
  GYD: { name: "Guyanaese Dollar", symbol: "$", flag: "ğŸ‡¬ğŸ‡¾" },
  HNL: { name: "Honduran Lempira", symbol: "L", flag: "ğŸ‡­ğŸ‡³" },
  HTG: { name: "Haitian Gourde", symbol: "G", flag: "ğŸ‡­ğŸ‡¹" },
  JMD: { name: "Jamaican Dollar", symbol: "J$", flag: "ğŸ‡¯ğŸ‡²" },
  KGS: { name: "Kyrgystani Som", symbol: "Ğ»Ğ²", flag: "ğŸ‡°ğŸ‡¬" },
  KHR: { name: "Cambodian Riel", symbol: "áŸ›", flag: "ğŸ‡°ğŸ‡­" },
  KMF: { name: "Comorian Franc", symbol: "CF", flag: "ğŸ‡°ğŸ‡²" },
  KYD: { name: "Cayman Islands Dollar", symbol: "$", flag: "ğŸ‡°ğŸ‡¾" },
  KZT: { name: "Kazakhstani Tenge", symbol: "â‚¸", flag: "ğŸ‡°ğŸ‡¿" },
  LAK: { name: "Laotian Kip", symbol: "â‚­", flag: "ğŸ‡±ğŸ‡¦" },
  LRD: { name: "Liberian Dollar", symbol: "$", flag: "ğŸ‡±ğŸ‡·" },
  LSL: { name: "Lesotho Loti", symbol: "L", flag: "ğŸ‡±ğŸ‡¸" },
  LYD: { name: "Libyan Dinar", symbol: "Ù„.Ø¯", flag: "ğŸ‡±ğŸ‡¾" },
  MDL: { name: "Moldovan Leu", symbol: "L", flag: "ğŸ‡²ğŸ‡©" },
  MGA: { name: "Malagasy Ariary", symbol: "Ar", flag: "ğŸ‡²ğŸ‡¬" },
  MKD: { name: "Macedonian Denar", symbol: "Ğ´ĞµĞ½", flag: "ğŸ‡²ğŸ‡°" },
  MNT: { name: "Mongolian Tugrik", symbol: "â‚®", flag: "ğŸ‡²ğŸ‡³" },
  MOP: { name: "Macanese Pataca", symbol: "MOP$", flag: "ğŸ‡²ğŸ‡´" },
  MRU: { name: "Mauritanian Ouguiya", symbol: "UM", flag: "ğŸ‡²ğŸ‡·" },
  MUR: { name: "Mauritian Rupee", symbol: "â‚¨", flag: "ğŸ‡²ğŸ‡º" },
  MVR: { name: "Maldivian Rufiyaa", symbol: "Rf", flag: "ğŸ‡²ğŸ‡»" },
  MWK: { name: "Malawian Kwacha", symbol: "MK", flag: "ğŸ‡²ğŸ‡¼" },
  MZN: { name: "Mozambican Metical", symbol: "MT", flag: "ğŸ‡²ğŸ‡¿" },
  NAD: { name: "Namibian Dollar", symbol: "$", flag: "ğŸ‡³ğŸ‡¦" },
  NIO: { name: "Nicaraguan CÃ³rdoba", symbol: "C$", flag: "ğŸ‡³ğŸ‡®" },
  NPR: { name: "Nepalese Rupee", symbol: "â‚¨", flag: "ğŸ‡³ğŸ‡µ" },
  PAB: { name: "Panamanian Balboa", symbol: "B/.", flag: "ğŸ‡µğŸ‡¦" },
  PGK: { name: "Papua New Guinean Kina", symbol: "K", flag: "ğŸ‡µğŸ‡¬" },
  PYG: { name: "Paraguayan Guarani", symbol: "â‚²", flag: "ğŸ‡µğŸ‡¾" },
  RSD: { name: "Serbian Dinar", symbol: "Ğ”Ğ¸Ğ½.", flag: "ğŸ‡·ğŸ‡¸" },
  RWF: { name: "Rwandan Franc", symbol: "FRw", flag: "ğŸ‡·ğŸ‡¼" },
  SBD: { name: "Solomon Islands Dollar", symbol: "$", flag: "ğŸ‡¸ğŸ‡§" },
  SCR: { name: "Seychellois Rupee", symbol: "â‚¨", flag: "ğŸ‡¸ğŸ‡¨" },
  SDG: { name: "Sudanese Pound", symbol: "Ø¬.Ø³.", flag: "ğŸ‡¸ğŸ‡©" },
  SLL: { name: "Sierra Leonean Leone", symbol: "Le", flag: "ğŸ‡¸ğŸ‡±" },
  SOS: { name: "Somali Shilling", symbol: "S", flag: "ğŸ‡¸ğŸ‡´" },
  SRD: { name: "Surinamese Dollar", symbol: "$", flag: "ğŸ‡¸ğŸ‡·" },
  STN: { name: "SÃ£o TomÃ© and PrÃ­ncipe Dobra", symbol: "Db", flag: "ğŸ‡¸ğŸ‡¹" },
  SYP: { name: "Syrian Pound", symbol: "Â£", flag: "ğŸ‡¸ğŸ‡¾" },
  SZL: { name: "Swazi Lilangeni", symbol: "L", flag: "ğŸ‡¸ğŸ‡¿" },
  TJS: { name: "Tajikistani Somoni", symbol: "SM", flag: "ğŸ‡¹ğŸ‡¯" },
  TMT: { name: "Turkmenistani Manat", symbol: "T", flag: "ğŸ‡¹ğŸ‡²" },
  TOP: { name: "Tongan PaÊ»anga", symbol: "T$", flag: "ğŸ‡¹ğŸ‡´" },
  TTD: { name: "Trinidad and Tobago Dollar", symbol: "TT$", flag: "ğŸ‡¹ğŸ‡¹" },
  TZS: { name: "Tanzanian Shilling", symbol: "TSh", flag: "ğŸ‡¹ğŸ‡¿" },
  UGX: { name: "Ugandan Shilling", symbol: "USh", flag: "ğŸ‡ºğŸ‡¬" },
  XAF: { name: "Central African CFA Franc", symbol: "FCFA", flag: "ğŸŒ" },
  XCD: { name: "East Caribbean Dollar", symbol: "$", flag: "ğŸŒ" },
  XOF: { name: "West African CFA Franc", symbol: "CFA", flag: "ğŸŒ" },
  XPF: { name: "CFP Franc", symbol: "â‚£", flag: "ğŸŒ" },
  YER: { name: "Yemeni Rial", symbol: "ï·¼", flag: "ğŸ‡¾ğŸ‡ª" },
  ZMW: { name: "Zambian Kwacha", symbol: "ZK", flag: "ğŸ‡¿ğŸ‡²" },
  ZWL: { name: "Zimbabwean Dollar", symbol: "Z$", flag: "ğŸ‡¿ğŸ‡¼" },
  
  // Cryptocurrencies
  BTC: { name: "Bitcoin", symbol: "â‚¿", flag: "ğŸª™" },
  ETH: { name: "Ethereum", symbol: "Î", flag: "ğŸª™" },
  BNB: { name: "Binance Coin", symbol: "BNB", flag: "ğŸª™" },
  SOL: { name: "Solana", symbol: "SOL", flag: "ğŸª™" },
  XRP: { name: "Ripple", symbol: "XRP", flag: "ğŸª™" },
  ADA: { name: "Cardano", symbol: "ADA", flag: "ğŸª™" },
  DOGE: { name: "Dogecoin", symbol: "Ã", flag: "ğŸª™" },
  MATIC: { name: "Polygon", symbol: "MATIC", flag: "ğŸª™" },
  DOT: { name: "Polkadot", symbol: "DOT", flag: "ğŸª™" },
  AVAX: { name: "Avalanche", symbol: "AVAX", flag: "ğŸª™" }
};

// Currency symbol to code mapping (for detection)
const CURRENCY_SYMBOLS = {
  "$": ["USD", "AUD", "CAD", "MXN", "SGD", "HKD", "NZD"],
  "â‚¬": ["EUR"],
  "Â£": ["GBP"],
  "â‚¹": ["INR"],
  "Â¥": ["JPY", "CNY"],
  "â‚½": ["RUB"],
  "â‚©": ["KRW"],
  "â‚º": ["TRY"],
  "R$": ["BRL"],
  "â‚ª": ["ILS"],
  "â‚±": ["PHP"],
  "â‚«": ["VND"],
  "â‚¦": ["NGN"],
  "â‚¨": ["PKR", "NPR", "LKR"],
  "à¸¿": ["THB"],
  "â‚¡": ["CRC"],
  "â‚´": ["UAH"],
  "â‚¸": ["KZT"],
  "â‚¼": ["AZN"],
  "â‚¾": ["GEL"],
  "â‚¿": ["BTC"],
  "Î": ["ETH"]
};

// Default pinned currencies
const DEFAULT_PINNED = ["USD", "EUR", "GBP", "INR", "JPY", "AUD"];

// API configurations
const API_CONFIGS = [
  {
    name: "ExchangeRate-API",
    url: (base) => `https://open.er-api.com/v6/latest/${base}`,
    parse: (data) => data.result === "success" ? data.rates : null
  },
  {
    name: "Frankfurter",
    url: (base) => `https://api.frankfurter.app/latest?from=${base}`,
    parse: (data) => data.rates ? { ...data.rates, [data.base]: 1 } : null
  },
  {
    name: "ExchangeRate.host",
    url: (base) => `https://api.exchangerate.host/latest?base=${base}`,
    parse: (data) => data.success ? data.rates : null
  }
];
